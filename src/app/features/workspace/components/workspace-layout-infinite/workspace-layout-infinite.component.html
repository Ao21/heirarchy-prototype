<ng-container *ngFor="let item of layoutService.links$ | async">
  <app-workspace-connection-link
    [ngStyle]="{
      'left.px': item.target.childParent?.left || item.source.left,
      'top.px': (item.target.childParent?.top || item.source.top) + 100
    }"
    [origin]="item.source"
    [link]="item.target"
  ></app-workspace-connection-link>
</ng-container>

<ng-container
  *ngFor="
    let item of layoutService.items$ | async | keyvalue;
    trackBy: trackByID
  "
>
  <div
    class="position"
    [ngStyle]="{
      transform:
        'translate3d(' + item.value.left + 'px, ' + item.value.top + 'px, 0)'
    }"
  >
    <app-workspace-node-leaf-fixed
      (init)="createDraftNode(item.value.id)"
      (mouseenter)="setActiveNode(item.value)"
      (mouseleave)="setActiveNode(item.value)"
      (end)="cancelDraftNode()"
      [item]="item.value"
      >{{ item.value.id }}
    </app-workspace-node-leaf-fixed>
  </div>
</ng-container>

<app-workspace-connection-layer></app-workspace-connection-layer>
